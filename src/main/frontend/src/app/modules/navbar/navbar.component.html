<nav>
  <div class="left">
    <app-logo-link></app-logo-link>
  </div>
  <div class="right">
    <ng-container *ngIf="!user.isAuthenticated">
      <a (click)="handleChangeThemeColorClickEvent($event)">Toggle theme</a>
      <a class="login" href="/oauth2/authorization/github" (click)="preLogin()"
        >Login with
        <span class="login-icon iconify" data-icon="fe:github"></span
      ></a>
    </ng-container>
    <ng-container *ngIf="user.isAuthenticated">
      <span class="welcome">Welcome {{ user.username }}</span>
      <div
        class="user-avatar"
        [matMenuTriggerFor]="menu"
        (mouseover)="onMouseOver()"
        #profileDropdownTrigger="matMenuTrigger"
      >
        <app-user-avatar [user]="user"></app-user-avatar>
        <span
          class="dropdown-icon iconify"
          data-icon="ic:round-keyboard-arrow-down"
        ></span>
      </div>

      <mat-menu #menu="matMenu" xPosition="before">
        <span mat-menu-item (click)="handleChangeThemeColorClickEvent($event)"
          >Toggle theme</span
        >
        <a mat-menu-item [routerLink]="['/posts']">Manage Posts</a>
        <a mat-menu-item [routerLink]="['/posts/new']">Create Post</a>
        <hr />
        <a mat-menu-item href="/logout">Logout</a>
      </mat-menu>
    </ng-container>
  </div>
</nav>
